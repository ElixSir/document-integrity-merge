<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>

  <py-config>
    packages = [
      "pillow",
      "numpy", 
      "opencv-python"
    ]

    [[fetch]]
    from = './py/'
    files = ['display.py']
  </py-config>

  <p id="status">OpenCV.js is loading...</p>

  <img id="imageSrc" alt="No Image" style="display: none;"/>
  <label for="img-upload"> <b>Estimation de la qualité de l'image (PNG) : </b></label> 
  <input name="img-upload" type="file" id="file-upload">
  
  <br>
  
  <label for="output">Do you want to see the results of the estimation? </label>
  <input type="checkbox" id="output" name="output" checked>

  <br>

  <label for="resize">Do you want to resize the image? </label>
  <input type="checkbox" id="resize" name="resize">

  <input type="number" id="resize_value" value="800">

  <br>

  <label for="resize_OpenCV">Use OpenCV? (if not, PIL)</label>
  <input type="checkbox" id="resize_OpenCV" name="resize_OpenCV" checked>
  
  <br>

  <button onclick="resetOutput()">Reset Output</button> 

  <br>

  <label for="estimation-result"> <b>Resultat de l'estimation : </b></label> 
  <div name="estimation-result" id="output_estimation"></div>

  <label for="qualite-result"> <b>QUALITÉ : </b></label> 
  <div name="qualite-result" id="output_qualite"></div>
  
  <label for="exec_time-result"> <b>Temps d'exec (ms) : </b></label> 
  <div name="exec_time-result" id="output_exec_time"></div>

  <label for="img-uploaded"> <b>Image uploadé : </b></label> 
  <br> 
  <div name="img-uploaded" id="output_upload"></div>
  
  <h2 id="chargement_titre"></h2>
  <h3 id="chargement"></h3>
  <h2 id="resultat"></h2>
  <h2 id="valide"></h2>
  
  <div>

    <!--  Debugging -->
      
     <!-- <div class="inputoutput">
      <canvas id="canvasOutput2" ></canvas>
      <div class="caption">canvasOutput2</div>
    </div>
    <div class="inputoutput" >
      <canvas id="canvasOutput4" ></canvas>
      <div class="caption">canvasOutput4</div>
    </div>
    <div class="inputoutput">
      <canvas id="canvasOutput5" ></canvas>
      <div class="caption">canvasOutput5</div>
    </div>
    <div class="inputoutput">
      <canvas id="canvasOutput54" ></canvas>
      <div class="caption">canvasOutput54</div>
    </div>
    <div class="inputoutput">
      <canvas id="canvasOutput6" ></canvas>
      <div class="caption">canvasOutput6</div>
    </div>
    <div class="inputoutput">
      <canvas id="canvasOutput7" ></canvas>
      <div class="caption">canvasOutput7</div>
    </div>
    <div class="inputoutput">
      <canvas id="canvasOutput8" ></canvas>
      <div class="caption">canvasOutput8</div>
    </div>
    <div class="inputoutput">
      <canvas id="canvasOutput9" ></canvas>
      <div class="caption">canvasOutput9</div>
    </div>
    <div class="inputoutput">
      <canvas id="canvasOutput10" ></canvas>
      <div class="caption">canvasOutput10</div>
    </div> -->


    <div class="inputoutput" hidden>
      <canvas id="canvasOutput11" ></canvas>
      <div class="caption">canvasOutput11</div>
    </div>
    <div class="inputoutput" hidden>
      <canvas id="canvasOutput12" ></canvas>
      <div class="caption">canvasOutput12</div>
    </div>
  </div>

  <!-- Fields to test for Version 1 -->

  <div id="CNI_FR_V1_Photo">
    <img id="bande_haut_bleue_V1_Photo" src="./CNI_FR_V1_Photo/bande_haut_bleue.jpg" hidden>
    <img id="nationnalite_fr_V1_Photo" src="./CNI_FR_V1_Photo/nationnalite_fr.jpg" hidden>
    <img id="ne_le_V1_Photo" src="./CNI_FR_V1_Photo/ne_le.jpg" hidden>
    <img id="nom_V1_Photo" src="./CNI_FR_V1_Photo/nom.jpg" hidden>
    <img id="numero_CNI_V1_Photo" src="./CNI_FR_V1_Photo/numero_CNI.jpg" hidden>
    <img id="bas_V1_Photo" src="./CNI_FR_V1_Photo/bas.jpg" hidden>
  </div>

  <!-- Fields to test for Version 2 -->

  <div id="CNI_FR_V2_Photo">
    <img id="date_expiration_V2_Photo" src="./CNI_FR_V2_Photo/date_expiration.jpg" hidden>
    <img id="date_naissance_V2_Photo" src="./CNI_FR_V2_Photo/date_naissance.jpg" hidden>
    <img id="lieu_naissance_V2_Photo" src="./CNI_FR_V2_Photo/lieu_naissance.jpg" hidden>
    <img id="nationalite_V2_Photo" src="./CNI_FR_V2_Photo/nationalite.jpg" hidden>
    <img id="nom_V2_Photo" src="./CNI_FR_V2_Photo/nom.jpg" hidden>
    <img id="numero_document_V2_Photo" src="./CNI_FR_V2_Photo/numero_document.jpg" hidden>
    <img id="sexe_V2_Photo" src="./CNI_FR_V2_Photo/sexe.jpg" hidden>
    <img id="carte_nationale_V2_Photo" src="./CNI_FR_V2_Photo/carte_nationale.jpg" hidden>
    <img id="prenom_V2_Photo" src="./CNI_FR_V2_Photo/prenom.jpg" hidden>
    <img id="republique_V2_Photo" src="./CNI_FR_V2_Photo/republique.jpg" hidden>
  </div>
  
  <!-- Fields to practice OCR on them -->

  <canvas id="canvasAffichage1" hidden></canvas>
  <canvas id="canvasAffichage2" hidden></canvas>
  <canvas id="canvasAffichage3" hidden></canvas>
  <canvas id="canvasAffichage4" hidden></canvas>
  <canvas id="canvasAffichage5" hidden></canvas>
  <canvas id="canvasAffichage6" hidden></canvas>
  <canvas id="canvasAffichage7" hidden></canvas>
  <canvas id="canvasAffichage8" hidden></canvas>
  <canvas id="canvasAffichage9" hidden></canvas>
  <canvas id="canvasAffichage10" hidden></canvas>
  <canvas id="canvasAffichage11" hidden></canvas>
   
</body>

<!-- Javascrits Library -->
<script type="text/javascript" src="libs/opencv-4.7.0.js"></script>
<script src='https://unpkg.com/tesseract.js@4.0.0/dist/tesseract.min.js'></script>

<!-- Javascrits Functions -->
<script type="text/javascript" onload="onOpenCvReady();" src="./js/contour_detection.js"></script>
<script type="text/javascript" src="./js/checking_parasiting_objects.js"></script>
<script type="text/javascript" src="./js/scoring.js"></script>
<script type="text/javascript" src="./js/main.js"></script>

<!-- Python Functions -->
<py-script src="./py/image_upload.py"></py-script>
<py-script src="./py/display.py"></py-script>
  
</html>